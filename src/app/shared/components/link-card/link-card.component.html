<div
  [class]="
    'group relative rounded-3xl overflow-hidden transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 h-full flex flex-col ' +
    platformClasses
  ">
  <!-- Image/Thumbnail Container -->
  <div
    class="h-44 w-full overflow-hidden relative bg-md-sys-dark-surface-container-high">
    @if (link.imageUrl) {
    <img
      [src]="link.imageUrl"
      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-95 group-hover:opacity-100"
      alt="Thumbnail" />
    } @else {
    <div
      class="w-full h-full flex items-center justify-center text-md-sys-dark-outline bg-md-sys-dark-surface-container-high">
      <span class="text-4xl opacity-50 font-display">#</span>
    </div>
    }

    <!-- Platform Badge -->
    @if (link.platform) {
    <div
      [class]="
        'absolute top-3 right-3 px-3 py-1.5 rounded-xl text-[10px] font-bold tracking-wider uppercase shadow-lg backdrop-blur-md border border-white/20 ' +
        platformBadgeClasses
      ">
      {{ link.platform }}
    </div>
    }

    <!-- Gradient Overlay -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-md-sys-dark-surface-container via-transparent to-transparent opacity-60"></div>
  </div>

  <!-- Content -->
  <div class="p-5 flex flex-col flex-1 relative -mt-6">
    <!-- Title -->
    <div class="mb-2">
      <h3
        class="font-display font-medium text-lg text-md-sys-dark-on-surface leading-tight line-clamp-2 group-hover:text-md-sys-dark-primary transition-colors">
        <a [href]="link.url" target="_blank" class="focus:outline-none">
          <span aria-hidden="true" class="absolute inset-0"></span>
          {{ link.title }}
        </a>
      </h3>
    </div>

    <!-- Description -->
    @if (link.description) {
    <p class="text-sm text-md-sys-dark-outline line-clamp-2 mb-4 flex-1">
      {{ link.description }}
    </p>
    }

    <!-- Footer / Actions -->
    <div
      class="flex items-center justify-between mt-auto pt-2 border-t border-md-sys-dark-outline-variant/30">
      <span class="text-xs text-md-sys-dark-outline font-medium tracking-wide">
        {{ link.createdAt | date : 'MMM d, y' }}
      </span>

      <div class="flex gap-1 relative z-10">
        <!-- Edit Button -->
        <button
          (click)="onEdit.emit(link); $event.stopPropagation()"
          class="p-2 hover:bg-md-sys-dark-surface rounded-full text-md-sys-dark-outline hover:text-md-sys-dark-primary transition-colors"
          title="Edit">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />
          </svg>
        </button>

        <!-- Delete Button -->
        <button
          (click)="onDelete.emit(link.id); $event.stopPropagation()"
          class="p-2 hover:bg-md-sys-dark-surface rounded-full text-md-sys-dark-outline hover:text-red-400 transition-colors"
          title="Delete">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M3 6h18" />
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
